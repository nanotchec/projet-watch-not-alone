// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Salon {
  id_salon Int @id @default(autoincrement())
  code_partage String
  nom String
  id_participation_hote Participation? @relation(fields: [id_participation_hoteID], references: [id_participation])
  id_participation_hoteID Int @unique
  etat_lecture String
  fournisseur String
  video_id String
  horodatage_sec Int
  maj_etat_le DateTime @updatedAt
  cree_le DateTime @default(now())
}

model Participation {
  id_participation Int @id @default(autoincrement())
  id_participation_hote Salon?
  id_utilisateur Utilisateur? @relation(fields: [id_utilisateurID], references: [id_utilisateur])
  id_utilisateurID Int
  pseudo String
  role String
  ip String
  rejoint_le DateTime @default(now())
  quitte_le DateTime? 
  id_message Message[]
}

model Utilisateur {
  id_utilisateur Int @id @default(autoincrement())
  pseudo String
  email String
  mot_de_passe_hache String
  cree_le DateTime @default(now())
  modifie_le DateTime @updatedAt
  id_participation Participation[]
}

model Message {
  id_message Int @id @default(autoincrement())
  id_participation Participation @relation(fields:[id_ParticipationID], references: [id_participation])
  id_ParticipationID Int 
  type String
  contenu String
  cree_le DateTime @default(now())
}